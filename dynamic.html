
<html>
<head>
<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
<title>kan kan | Order GUI</title>
<script src="static/js/jquery.min.js"> </script>
<!-- <script src="static/js/bootstrap.min.js"></script> -->
<script src="static/js/requests.js" ></script>
<link rel="stylesheet" type="text/css" href="static/css/main.css">
<link rel="stylesheet" type="text/css" href="static/css/w3.css" >

<script>
	function InitSetUp ()
		{
			LoadPaintNames ("paint-name", "paint_names_endpoint")	
		}
</script>

</head>

<body class="main_body">
		<div id="main-header">
				<div  id= "Navigetion" class="header">
						<!-- ======= CLOSE ====== -->
					<span href="javascript:void(0)" class="closebtn" onclick="closeNavi()"><label class="close-navi-span"> &times;</label></span><!-- closs the navi -->
					<div id="our-avenues-menu-label-div">
						<label class="our-avenues-label" onclick="Load_index ()" > Home</label>
					</div><br>
						
						<div id="menu-items-div">
								<div id="our-avenues-menu-label-div">
										<label class="our-avenues-label" > Our Products</label>
									</div><br>
							<center>
								<a><label onclick="Load_food_view ()">Paint</label></a>
								<a><label onclick="Load_chips_view ()">Mapei</label></a>
								
							</center>
						</div>
						<br>
						<div id="our-avenues-menu-label-div">
							<label class="our-avenues-label" onclick="Load_developer ()" > Developer</label>
						</div><br>
				</div>
				<div id="NaviDiv">
					<label class="kone-menu-label" onclick="openMenus()">&#9776;</label>
					<label class="kone-label">Kan Kan builders</label>
				</div>
		<script>
		function openMenus(){document.getElementById("Navigetion").style.width = "240px"}
		function closeNavi (){document.getElementById("Navigetion").style.width = "0"}
		</script>
		
		</div> <!-- main-header-->
		<div id="main-body" > <!-- Begin main-body div -->
	
	<center>
		<br><br>
		<label class="home_page_fonts" > Name :: </label> <br>
		<label class="home_page_fonts" > Open Blance :: </label><br>

		<!-- 
			===========================================================================================
			===========================================================================================
			===========================================================================================
			===========================================================================================
		-->
			<form id="customer_list_form_id"  name="customer_list_form">
				<table id="container" class="w3-white" >
						<tr class="w3-black"> 
							<td><label class="form-labels-titles">Name</label></td><td> <label class="form-labels-titles">Size</label></td> <td><label class="form-labels-titles" >Qty</label></td> <td><label class="form-labels-titles">Amount</label></td><td><label class="form-labels-titles">Total</label></td>
						</tr><br>

						<tr class="row_inputs" >
							<td><select id="paint-name"  name="paint_name" class="paint-name form_inputs"><option>Paint Name</option></select></td>
							<td><select id="led-bulbs-names" required class="form_inputs"  name="item_name">
								<option  >Size</option>
								<option value="1" >1 ltr</option>
								<option value="4" >4 ltr</option>
								<option value="20" >20 ltr</option>

							</select>
							</td>
							<td><input class="form_inputs " type="text"  name="paint_name" /></td>
							<td><input class="form_inputs " type="text"  name="paint_name" /></td>
							<td><input class="subtotalinputs form_inputs" name="paint_name" type="text"/></td>
								<!-- <a href="#" id="add_row_id">Add More</a><br> -->
							<!-- <td><label> More</label></td> -->
						</tr>

				</table>
				<br>
				<table class="w3-white" id="second-table" >
					<tr>
						<td>
							<button type="button" name="submit" id="totalid" value="Total"/>Total ::</button></td>							
						</td>
						<td><input class="subtotalinputs form_inputs finaltotal" type="text" name="final_total" id="final_total" /></td>
						<td><input type="button" id="sub-total-btn" value="sub totalss"></td>
						<td>
							<button type="button" name="submit" id="subtotalid" value="Total"/>Sub Total</button></td>							
						</td>
						<td>
							<input type="reset" name="text" id="submit_id"  value="Clear"/>
						</td>
						<td><label id="add_row_id">Add More</label></td>
						<td>
							<input type="button" name="submit" class=" btn btn-success" onclick="SubmitCustomerOrder ()"  value="Submit"/>
						</td>
					</tr>
				</table>
			</form>
	
			<div>
				</div>
			<!-- 
				===========================================================================================
				===========================================================================================
				===========================================================================================
				===========================================================================================
			-->
	<button class="back-btn" onclick="javascript:history.go(-1)"><< Back</button><br><br>
</center>
</div>

<script>

	$(document).ready (function (event)
		{
			function CalculatFinalTotal ()
				{
					var final_val = 0;
					$(".finaltotal").each( function () {final_val += parseFloat($(this).val())});
					$('#final_total').val(final_val);
				}

			$("#sub-total-btn").click( 'input.qty', function ()
				{
					let parent_row_inputs = $(this).closest("row_inputs") ;
					let val = parseFloat(parent_row_inputs.find("input:eq(0)").val ()) * parseFloat(parent_row_inputs.find("input:eq(1)").val());

					$(this).closest("row_inputs").find(".finaltotal").val(val);
					// alert("key up event...")

				});





				
			// Variables 
			// var new_row = '<br><div><label>Name</label> <input type="text" name="paint_name" id="childpaint_name_id" /> <label>Qty</label> <input type="text" class="qty_class" name="qty" id="childqty_id" /> <label>Total</label> <input type="text" name="total" class="total_class" id="childtotal_id" /> <a href="#" id="remove_row_id">Remove</a> </div>';
			let couter = 2;
			let nameinput = '<tr class="row_inputs" id="dynamic_row"> <td> <select id="paint-name" name="paint_name" class="paint-name form_inputs"><option>Paint Name</option></select></td>'
			let sizeinput = '<td><select id="id1'+ couter +'" required class="form_inputs" name="item_name"><option  >Size</option><option value="1" >1 ltr</option><option value="4" >4 ltr</option><option value="20" >20 ltr</option></select></td>'
			let qtyinput = '<td><input class="quatity form_inputs" name="paint_name" type="text" /></td>'
			let amount = '<td><input class="quatity form_inputs" name="paint_name" type="text" /></td>';
			let totalinput = '<td><input class="subtotalinputs form_inputs" name="paint_name[ '+ couter +']"  type="text"/></td>'
			let removelabel = '<td><label id="remove_row_id">Remove</label></td></tr>';

			let new_row = nameinput + sizeinput + qtyinput + amount + totalinput + removelabel
			var maxrows = 5;
			var starting_row = 1;
			
			// Add rows
			$("#add_row_id").click ( function (event) 
				{
					
					if (starting_row <= maxrows)
						{
							
							
							$("#container").append (new_row);
							starting_row ++;
						}
				});

			// Remove rows
			// ====================
			// Remove rows ("#container").on("click","#remove_row_id", function (event) 
			// $("#container").on("click", "#remove_row_id", function (event) 
			// 	{
			// 		// alert()
			// 		// $(remove_row_id).container("div").remove ();
			// 		$(this).parent("tr").remove();
			// 		starting_row--;
			// 	});
			
			$("#container").on("click", "#remove_row_id", function () 
				{$("#dynamic_row").remove();});
			

			// ====================================
			// 		MATH CALCULATIONS 
			// ====================================

			// sub total
			$("#subtotalid").click ( function ()
				{
					let subtotal = 0;
					let one_ltr = 2000;
					let four_ltr = 60000;
					let twenty_ltr = 200000;					

					$(".quatity").each (function () 
						{
							subtotal = parseFloat(this.value) * one_ltr
							console.log(subtotal)
							console.log(this);
							// $(".subtotalinputs").val(subtotal)
						});
				});
			// Over roll total
			$("#totalid").click (function () 
				{
					var sum = 0;
				$('.subtotalinputs').each(function () 
					{
						sum += parseFloat(this.value) ; 

						console.log( this )
					});
					console.log(sum)
				});


		});  /// document. ready end

		

			function SubmitCustomerOrder ()
			{
				let data = $("form").serializeArray();
				console.log ("data serial........")
				console.log(data)
				let customer_array_list = [];
				let customer_order_list


				// $.each(data, function (inputaskey,textasvalue)
				$.each(data, function (inputaskey,textasvalue){customer_array_list.push( textasvalue.value )});

					customer_order_list =  customer_array_list.join(' ').trim();
					console.log(customer_order_list)

				$.ajax ({
						url:"http://127.0.0.1:4444/customer_order_post",
						method:"POST",
						data: {customer_list:customer_order_list}
						});	
				
			}

	function CalculateRowTotal ()
		{
			// let price = 20000;
			// let total = 0
			// let QtyInput = document.getElementsByClassName("qty_class");
			// let TotalInput = document.getElementById("total_id");

			// for (let i = 0; i<QtyInput.length; i++)
			// 	{
			// 		if(parseInt(QtyInput[i].value))
			// 		TotalInput += parseInt(QtyInput[i].value);
					// 	}

					// console.log(QtyInput)
					// console.log("////////////////")


		// $("tr").each ( function () 
		// 	{
		// 		var total = 100;
		// 		$(this).find(".qty").each( function () 
		// 			{
		// 				var qty = $(this).text();
		// 				if (qty.length == 0)
		// 					{
		// 						total+= parseFloat(qty)
		// 					}

		// 			});
		// 		$(this).find("#total_id").html(total)
		// 	});

		// let subtotalinputs = document.getElementsByClassName("subtotalinputs")
		// for (let i = 0; i < subtotalinputs.length; i++)
		// 	{
		// 		// console.log(subtotalinputs[i].value)
		// 		console.log(subtotalinputs[i])
		// 	}


		// var subtotalinputs = document.querySelectorAll('[name=total]');
		// var sum = 0
		// subtotalinputs.forEach (function (element)
		// 	{
		// 		console.log(value)
		// 		sum = sum + element.value;
		// 	});
		// console.log(sum)

			var sum = 0;
			$('.subtotalinputs').each(function () 
				{
					sum += parseFloat(this.value); 
				});
				console.log(sum)
		console.log("Adding total............")
		
	}

	

</script>
</body>
</html>

